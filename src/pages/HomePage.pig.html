<content>
  <div class="container">
    <div><img src="/logo.png" /></div>

    <div class="welcomeMessage">
      <div>
        <h1>Welcome to PigletJS</h1>
        <p>This is the homepage of your app.</p>
        <p>Edit <code>src/HomePage.pig.html</code> to see changes.</p>
      </div>
      <div style="display: flex; flex-direction: column">
        <button id="showTreeBtn">üîç Display component tree in console</button>
        <button id="clickMe" type="button">
          Click me to increase the count below!
        </button>
        <ClickCounter id="clickCounter" />
        <button id="navigate" style="margin-top: 0">
          Navigate to the other route!
        </button>
      </div>
    </div>
  </div>
</content>

<script>
  const { clickCount = init(0) } = state;

  onStateChange = (value, property) => {
    if (property === "clickCount") {
      element("#clickCounter").pass("clickcount", value);
    }
  };

  element("#navigate").on("click", function () {
    navigate("/nested");
  });

  element("#clickMe").on("click", function () {
    clickCount.value += 1;
  });

  onConnect((component) => {
    console.log("HomePage data:", component);
    element("#clickCounter").pass("clickcount", clickCount.value);
  });

  setTimeout(() => {
    element("#showTreeBtn").on("click", () => {
      console.groupCollapsed("üå≤ Component's tree:");
      console.log(window.Piglet.tree);
      console.dir(window.Piglet.tree);
      console.groupEnd();
    });
  }, 0);
</script>
