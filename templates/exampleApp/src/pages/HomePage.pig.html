<content>
  <div class="container">
    <img src="/public/logo.png" alt="PigletJS Logo" />
    <div class="welcomeMessage">
      <div>
        <h1>Welcome to PigletJS</h1>
        <p>This is the homepage of your app.</p>
        <br />
        <p>Edit <code>src/HomePage.pig.html</code> to see changes.</p>
      </div>
      <div class="d-flex f-column">
        <button id="showTreeBtn">üîç Display component tree in console</button>
        <button id="clickMe" type="button">
          Click me to increase the count below!
        </button>
        <ClickCounter id="clickCounter" />
        <button id="navigate" class="mt-0">Navigate to the other route!</button>
      </div>
    </div>
  </div>
</content>

<script>
  import consoleTree from "@/modules/consoleTree.pig";

  const { clickCount = init(0) } = state;
  const clickCounter = element("#clickCounter");

  onStateChange["clickCount"] = (value) => {
    clickCounter.pass("clickcount", value);
  };

  clickCounter.pass("parentMethod", () => {
    console.log("I was called in my child!", clickCount.value);
  });

  clickCounter.pass("clickcount", clickCount.value);
  console.log("HomePage data:", component);

  element("#showTreeBtn").on("click", consoleTree);

  element("#navigate").on("click", function () {
    navigate("/nested");
  });

  element("#clickMe").on("click", function () {
    clickCount.value += 1;
  });
</script>

<script content="description">
  export default {
    name: "HomePage",
    description: "Home page",
  };
</script>
